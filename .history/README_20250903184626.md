# Anteprima del progetto

Il progetto finale si trova in: `Progetto/ConsegnaFinale`. Questo README fornisce una panoramica di com'è strutturato il lavoro

## Indice
- Panoramica rapida
- Struttura della cartella ConsegnaFinale
- Layer architetturali
- Prompt e UX
- Comportamenti chiave
- Carte/effetti principali (Blue-Eyes)
- Come eseguire
- Navigazione veloce del codice
- Note finali

---

## Panoramica rapida
- Entry point: `ConsegnaFinale/main.cpp`
- Motore di gioco: `ConsegnaFinale/GameLogic/` (regole, fasi, eventi, effetti)
- Input/UI: `ConsegnaFinale/InputController/`, `ConsegnaFinale/Utils/RenderUtils`
- Inizializzazione Gioco/Handlers/Effetti: `ConsegnaFinale/GameWiring/`
- Schermate e layout campo: `ConsegnaFinale/HomePage/`, `ConsegnaFinale/Field/`
- Risorse: gestite via `TextureManager` e `ResourceManager`

---

## Struttura della cartella ConsegnaFinale

- main.cpp
  - Entry point dell’app, ciclo principale (eventi, update, rendering, HUD).
  - Inizializza finestra SFML, risorse, campo, controller (Draw/Discard), AI P2 e stato UI.

- HomePage/
  - Schermata iniziale (Home) e selezione mazzo (Deck Selection).

- GameWiring/
  - Costruzione e attach delle risorse di `Game`, e i vari con gli handler applicativi (prompt, overlay, sincronizzazioni).

- InputController/
  - Gestione centralizzata di mouse/tastiera e azioni contestuali (drag, conferme, chiusure overlay) (non tutte, alcune sono rimaste in main).

- GameLogic/
  - Game/: stato e regole di gioco (giocatori, zone, evocazioni, cimitero, catene, pending per prompt).
  - Player/: mano, LP, zone Mostri/Magie-Trappole/Campo.
  - TurnManager/: gestione turno e fasi.
  - Events/: `EventDispatcher` e tipi di evento (pescate, evocazioni, attacchi, fine fase, ecc.).
  - Effects/: sistema effetti e implementazioni carte (Saggio, Fanciulla, Spirito del Bianco, Pietra Bianca, ecc.).
  - DrawController/, DiscardController/: flusso/animazioni di pescata e scarto.
  - AI/: controller del Player 2 (auto-risoluzioni e semplici heuristics).

- Deck/
  - Gestione mazzo/extra e animazioni di shuffle/pile.

- Field/
  - Layout del campo (slot Mostri/M/T/Campo/Deck/Cimitero/Extra) e resa grafica.

- FieldLoadingAnimation/
  - Transizione/animazione dall’Home al campo di gioco.

- Utils/
  - RenderUtils: disegno mani, zone, overlay, HUD, prompt.
  - AppConfig: dimensioni, posizionamenti, timing e mapping texture.
  - auxFunc e ResourceManager: utility e caricamento risorse.

- Overlay (Extra/Graveyard)
  - Sovrapposizioni per consultare Extra e Cimitero e gestire selezioni quando richieste.

---

## Layer architetturali

- Presentazione: `main` + `Field` + `RenderUtils` + Overlay (disegno, HUD, transizioni).
- Controller: `InputController`, `Draw/DiscardController` (input e animazioni → chiamate al motore).
- Motore: `GameLogic/Game` + `Events` + `Effects` (regole, fasi, catene, pending prompt).
- AI: `AIController` (P2 auto-giocante e auto-risoluzione dei prompt).

---

## Prompt e UX

- Overlay di selezione (riuso “DeckSend”) con titolo contestuale:
  - Melodia/Add: “Scegli un Mostro Drago dal Deck da aggiungere alla mano”
  - Fanciulla/Saggio (scelta SS): “Seleziona mostro da evocare specialmente”
  - Spirito del Bianco (banish M/T avversaria): “Scegli la carta da bandire”
  - Richiamo dal Cimitero: “Scegli il mostro da evocare”
- Prompt di risposta (catene): elenca attivabili in base al turno/contesto:
  - Magie Rapide/Trappole settate, effetti rapidi dei mostri controllati dal giocatore locale.
- Scelte rapide (esempi):
  - Evocazione Speciale: A (Attacco), D (Difesa)
  - Spell/Trap dalla mano: A (Attiva), S (Setta)
  - Mostri dalla mano: E (Evoca), P (Posiziona)
- Navigazione fasi: HUD con key-hints (es. N = Next phase, T = End turn).
- P2 (AI): auto-risolve senza prompt; P1 vede il prompt quando necessario.

---

## Comportamenti chiave

- Auto-risoluzione AI: tutte le scelte dell’avversario (P2) si risolvono senza prompt.
- Skip rapido post-Draw: al termine della pescata (se non ci sono prompt/trigger) si avanza automaticamente alla fase successiva.
- Ritorno alla Home robusto: `resetMatch` e una safety net azzerano eventuali stati modali residui per evitare blocchi di input.

---

## Carte/effetti principali (Blue-Eyes)

- Saggio con gli Occhi Blu
  - Attivabile solo in Main1/Main2; P2 auto, P1 con prompt dove richiesto.
  - Se attivato nel turno avversario (P2): scelte auto (nessun prompt umano).
- Fanciulla con gli Occhi di Blu
  - Trigger e prompt con titolazione corretta; P2 auto, P1 con scelta.
- Drago Spirito del Bianco
  - On-summon: bandisce 1 Magia/Trappola avversaria (inclusa la Magia Terreno).
    - P1: prompt con titolo “Scegli la carta da bandire”.
    - P2: scelta automatica.
  - Effetto rapido: può iniziare una catena o essere usato in risposta (anche nel turno avversario).
    - Tributare lo Spirito → Evocare Specialmente “Drago Bianco Occhi Blu” dalla mano (posizione a scelta).
- Pietra Bianca degli Antichi
  - In End Phase, se mandata al Cimitero in quel turno, può attivarsi per entrambi i giocatori in parallelo (ognuno risolve la propria istanza).

---

## Come eseguire

- Apri la cartella `Progetto` nell’IDE e builda il target basato su `ConsegnaFinale/main.cpp`.
- Avvio:
  - Dalla Home seleziona il deck, poi “Gioca”.
  - Segui gli hint HUD per fasi e tasti; i prompt compaiono quando richiesti.

---

## Navigazione veloce del codice

- Punto di ingresso: `ConsegnaFinale/main.cpp`
- Wiring logica/UI: `ConsegnaFinale/GameWiring/`
- Input e interazioni: `ConsegnaFinale/InputController/`
- Motore e regole: `ConsegnaFinale/GameLogic/Game/`, `TurnManager/`, `Events/`, `Effects/`
- Rendering e layout: `ConsegnaFinale/Field/`, `Utils/RenderUtils`, `AppConfig`
- Mazzi/animazioni: `ConsegnaFinale/Deck/`
- Overlay: `ConsegnaFinale/ExtraDeckOverlay`, `ConsegnaFinale/GraveyardOverlay`

---

## Note finali

- L’AI del P2 evita interruzioni risolvendo automaticamente le proprie scelte.
- L’overlay di selezione viene riusato con titoli/hint coerenti al contesto.
- Il README in `ConsegnaFinale` raccoglie note di rilascio e dettagli aggiuntivi.