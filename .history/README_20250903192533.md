# Preview del progetto

Il progetto finale si trova in: `Progetto/ConsegnaFinale`. Questa preview riassume la struttura delle cartelle e come avviare/giocare.

## Struttura cartelle (ConsegnaFinale)

- main.cpp
  - Punto di ingresso. Inizializza finestra e risorse, crea il motore di gioco, configura controller/overlay/UI e gestisce il game loop (eventi → update → render).

- HomePage/
  - Schermata iniziale e selezione mazzo. Gestisce la navigazione verso la partita e la visualizzazione delle opzioni disponibili.

- Field/
  - Layout e rendering del campo: slot Mostri, Magie/Trappole, Magia Terreno, Deck, Cimitero, Extra. Calcola posizioni, hitbox e disegna lo stato corrente del terreno.

- FieldLoadingAnimation/
  - Transizione e animazioni dall’Home al campo (effetti di ingresso e tempistiche di presentazione).

- GameWiring/
  - Inizializza il Game per la logica di gioco, collegando i vari handler degli eventi, registrando effetti dei mostri e inizializzando il tutto.

- InputController/
  - Gestione input mouse/tastiera e mapping azioni contestuali:
    - Drag dalla mano al campo, conferme/cancel dei prompt, chiusura overlay.
    - Gestioni dei vari tasti per fasi/turno e scelte rapide (posizione evocazioni, attiva/setta, ecc.).

- GameLogic/
  - Motore di gioco: stato, regole, fasi, catene, eventi, effetti e AI.
  - Sottocartelle principali:
    - Game/
      - Classe effettiva che si occupa della logica del gioco, gestisce lo stato dei giocatori, zone e slot, regole di evocazione/posizionamento, cimitero/banish, pending per i prompt, risoluzione degli effetti e gestione catene.
    - Player/
      - Stato dei giocatori: mano, LP, zone (Mostri/Magie-Trappole/Campo), interfacce di accesso e utilità.
    - TurnManager/
      - Gestione del turno/fasi (Draw, Standby, Main, Battle, End), avanzamento e priorità.
    - Events/
      - EventDispatcher e tipi evento (pescate, evocazioni, attacchi, fine fase, trigger effetti). Disaccoppia generazione/consumo di eventi tra logica e UI --> qui vengono creati i tipi di evento e i metodi per subscription e aggiunta quindi degli handler dei vari eventi. L'idea è che ogni volta che muovo una carta o faccio qualcosa emetto un evento che verrà poi gestito dall'handler apposito
    - Effects/
      - Sistema effetti e implementazioni delle carte principali (es. Saggio, Fanciulla, Drago Spirito del Bianco, Pietra Bianca). Contiene i trigger, le richieste di prompt e la risoluzione.
    - DrawController/
      - Flusso e animazioni di pescata coordinati con il motore (sincronizzazione timing/UI).
    - DiscardController/
      - Flusso di scarto quando richiesto da regole o effetti.
    - AI/
      - Logiche del Player 2: scelte automatiche, pass di priorità e auto-risoluzione dei prompt quando l’owner è l’avversario.

- Deck/
  - Gestione del mazzo e dell’extra: shuffle, estrazioni, rappresentazione grafica dei pile e piccole animazioni.

- Overlay/
  - ExtraDeckOverlay/
    - Consultazione e selezione dall’Extra Deck quando richiesto da effetti/regole.
  - GraveyardOverlay/
    - Consultazione e selezione dal Cimitero; supporta scorrimento e conferma.

- Utils/
  - RenderUtils/
    - Disegno mani, zone, overlay, HUD e prompt. Componenti di rendering riutilizzabili.
  - Config/
    - Parametri UI (dimensioni, posizionamenti, spaziature), timing animazioni, mapping texture.
  - auxFunc/
    - Utility generiche di supporto (font, calcoli, formattazioni).
  
- ResourceManager/
  - Caricamento e gestione risorse (font, definizioni carte, mapping dati) con caching e accesso centralizzato.

- TextureManager/
  - Caricamento/caching delle texture, mappa chiavi→path e fornitura delle texture ai renderer.

- Slot/
  - Modello e gestione degli slot del campo (occupazione, coordinate, interazioni e hit-test).

- AppHandlers/
  - Handler applicativi che reagiscono agli eventi del motore (aprono/chiudono prompt/overlay, sincronizzano stato grafico, gestiscono auto-scelte P2).

- Card/
  - Modelli/utility per i dati carta (tipi, attributi, costanti di supporto).

## Come giocare

1) Avvio
- Dopo aver eseguito l’app, nella Home bisogna prima selezionare un mazzo e successivamente premere “Gioca”.

2) Fasi e turni
- La pescata avviene in Draw Phase; se non ci sono scelte/trigger, si passa automaticamente alla fase successiva.
- HUD in alto: mostra fase corrente, suggerimenti tasti e messaggi di stato.
- Tasti rapidi principali: N per avanzare di fase, T per terminare il turno.

3) Azioni principali
- Mostri dalla mano: E (Evoca) • P (Posiziona).
- Magie/Trappole dalla mano: A (Attiva) • S (Setta).
- Evocazioni Speciali: A (Attacco) • D (Difesa) quando richiesto dal prompt.
- Prompt di risposta (catene): si apre quando sono presenti attivabili (Magie Rapide/Trappole settate, effetti rapidi mostri) in base al turno/contesto.

4) Prompt e AI
- Le selezioni compaiono in overlay con titolo contestuale (es. “Scegli la carta da bandire” per Drago Spirito del Bianco).
- Il giocatore avversario (P2, AI) risolve automaticamente le proprie scelte senza intervento né

## Note Finali


